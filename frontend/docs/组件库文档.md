# GameLink 前端组件库文档

本文件汇总 `frontend/src/components` 组件的用途、Props、默认值、事件与用法示例，帮助你在页面开发中高效复用统一的 UI 与交互。

## 快速开始

- 统一导入：`import { Button, Card, Modal, Table } from '@/components';`
- 按需导入：`import { Select } from '@/components/Select';`（一般不需要，建议统一从 `@/components` 导入）
- 如果你的项目未配置 `@` 路径别名，可用相对路径：`import { Button } from '../../src/components';`

## 设计与使用规范

- Props 命名与默认值：保持语义清晰、可选项有合理默认值；布尔值默认 `false`，尺寸默认 `medium`。
- 受控与非受控：输入类组件支持 `value` 和 `defaultValue`；存在内部状态时优先受控用法保证一致性。
- 事件与可用性：禁用或加载状态下不触发点击事件；键盘可访问性与 Esc 关闭等行为统一。
- 样式约定：组件样式源于 Less 模块，遵循 `--spacing-*`、`--text-*` 等设计变量；支持自定义 `className` 和 `style`。

## 组件总览

- 基础：`Button`、`Badge`、`Tag`、`Icons`
- 布局：`Card`、`Layout`（`Header`、`Sidebar`）、`Breadcrumb`
- 数据展示：`Table`、`DataTable`、`Pagination`、`Rating`、`Skeleton`
- 表单：`Form`、`FormItem`、`FormField`、`Input`、`PasswordInput`、`Select`
- 弹窗：`Modal`、`DeleteConfirmModal`、`ReviewModal`
- 其他：`ActionButtons`、`BulkActions`、`RouteCache`

---

## Button 按钮

- Props（默认值）
  - `variant`: `'primary' | 'secondary' | 'text' | 'outlined'`（`'primary'`）
  - `size`: `'small' | 'medium' | 'large'`（`'medium'`）
  - `block`: `boolean`（`false`）
  - `loading`: `boolean`（`false`）
  - `disabled`: `boolean`（`false`）
  - `icon`: `ReactNode`
  - 继承原生 `button` 属性，如 `type`、`onClick`
- 说明：`disabled || loading` 时按钮不可点击；`loading` 显示内置旋转指示。
- 示例：
```tsx
import { Button } from '@/components';

<Button>默认主按钮</Button>
<Button variant="outlined">轮廓按钮</Button>
<Button variant="text">文本按钮</Button>
<Button size="small">小号</Button>
<Button size="large" icon={<span>🔍</span>}>搜索</Button>
<Button block>块级按钮</Button>
<Button loading>提交中</Button>
``` 

## Badge 角标

- Props（默认值）
  - `count`: `number`
  - `dot`: `boolean`（`false`）
  - `showZero`: `boolean`（`false`）
  - `overflowCount`: `number`（`99`）
  - `children`: `ReactNode`（包裹模式）
  - `className`, `style`
- 说明：既支持独立展示，也支持包裹任意元素；`count > overflowCount` 显示为 `overflowCount+`。
- 示例：
```tsx
import { Badge, Button } from '@/components';

<Badge count={5} />
<Badge dot />
<Badge count={0} showZero />
<Badge count={120} overflowCount={99}><Button>消息</Button></Badge>
```

## Card 卡片

- Props（默认值）
  - `title`: `ReactNode`
  - `extra`: `ReactNode`
  - `bordered`: `boolean`（`true`）
  - `hoverable`: `boolean`（`false`）
  - `className`, `style`
- 说明：`title` 或 `extra` 存在则渲染 header；`hoverable` 增加悬停/按压效果。
- 示例：
```tsx
import { Card, Button } from '@/components';

<Card title="标题" extra={<Button variant="text">更多</Button>}>
  内容区域
</Card>

<Card hoverable bordered={false}>无边框可悬停卡片</Card>
```

## DataTable 数据卡片 + 表格

- Props（节选）
  - `title`: `ReactNode`
  - `headerActions`: `ReactNode`
  - `filters`: `FilterConfig[]`
  - `filterActions`: `ReactNode`
  - `columns`: `TableColumn[]`
  - `dataSource`: `any[]`
  - `loading`: `boolean`
  - `rowKey`: `string | (record)=>string`
  - `pagination`: `{ current, total, pageSize, onChange }`
  - `className`
- 说明：封装 `Card + Filters + Table + Pagination` 的常用列表页结构。
- 示例：
```tsx
import { DataTable } from '@/components';

<DataTable
  title="用户列表"
  headerActions={<button>导出</button>}
  filters={[{ key: 'status', label: '状态', component: <span>下拉/输入等</span> }]}
  filterActions={<button>查询</button>}
  columns={[{ key: 'name', title: '姓名', dataIndex: 'name' }]}
  dataSource={[{ id: '1', name: 'Alice' }]}
  rowKey="id"
  pagination={{ current: 1, total: 100, pageSize: 10, onChange: (p)=>{} }}
/> 
```

## DeleteConfirmModal 删除确认弹窗

- Props（默认值）
  - `visible`: `boolean`
  - `title`: `string`（`'确认删除'`）
  - `content`: `string | ReactNode`
  - `onConfirm`: `() => void | Promise<void>`
  - `onCancel`: `() => void`
  - `loading`: `boolean`（`false`）
- 示例：
```tsx
import { useState } from 'react';
import { DeleteConfirmModal, Button } from '@/components';

const Demo = () => {
  const [visible, setVisible] = useState(false);
  const [loading, setLoading] = useState(false);

  const handleDelete = async () => {
    setLoading(true);
    await new Promise(r=>setTimeout(r, 800));
    setLoading(false);
    setVisible(false);
  };

  return (
    <>
      <Button variant="outlined" onClick={()=>setVisible(true)}>删除</Button>
      <DeleteConfirmModal
        visible={visible}
        content="此操作不可撤销，确认删除？"
        loading={loading}
        onConfirm={handleDelete}
        onCancel={()=>setVisible(false)}
      />
    </>
  );
};
```

## ReviewModal 审核弹窗

- Props
  - `visible`: `boolean`
  - `orderNo`: `string`
  - `onClose`: `() => void`
  - `onSubmit`: `(data: { approved: boolean; reason: string }) => Promise<void>`
- 说明：拒绝时必须填写原因；含自定义底部 `footer`（按钮）。
- 示例：
```tsx
import { ReviewModal, Button } from '@/components';

<ReviewModal
  visible
  orderNo="ORD-2025-0001"
  onClose={()=>{}}
  onSubmit={async (data)=>{ console.log(data); }}
/>
```

## Modal 通用弹窗

- Props（默认值）
  - `visible`: `boolean`
  - `title`: `string`
  - `children`: `ReactNode`
  - `onClose`: `() => void`
  - `onOk`: `() => void`
  - `onCancel`: `() => void`
  - `okText`: `string`（`'确定'`）
  - `cancelText`: `string`（`'取消'`）
  - `width`: `number | string`（`520`）
  - `footer`: `ReactNode | null`（默认提供“取消/确定”）
  - `closable`: `boolean`（`true`）
  - `maskClosable`: `boolean`（`true`）
  - `className`
- 示例（默认底部）：
```tsx
<Modal visible title="标题" onClose={()=>{}} onOk={()=>{}}>
  内容
</Modal>
```
- 示例（自定义底部）：
```tsx
import { Modal, Button } from '@/components';

<Modal visible title="自定义底部" footer={
  <>
    <Button variant="outlined">取消</Button>
    <Button>保存</Button>
  </>
}>
  内容
</Modal>
```

## Form 与 FormItem 表单

- Form Props（默认值）
  - `layout`: `'horizontal' | 'vertical'`（`'vertical'`）
  - `className`
  - 其余继承 `form` 原生属性
- FormItem Props（默认值）
  - `label`: `ReactNode`
  - `required`: `boolean`（`false`）
  - `error`: `string`
  - `help`: `string`
  - `className`
- 示例：
```tsx
import { Form, FormItem, Input } from '@/components';

<Form layout="horizontal">
  <FormItem label="用户名" required>
    <Input placeholder="请输入" />
  </FormItem>
  <FormItem label="说明" help="可选填写">
    <Input />
  </FormItem>
</Form>
```

## FormField 统一字段包装

- Props（默认值）
  - `label`: `string`
  - `required`: `boolean`（`false`）
  - `error`: `string`
  - `className`
- 示例：
```tsx
import { FormField, Input } from '@/components';

<FormField label="邮箱" required error="格式不正确">
  <Input placeholder="example@mail.com" />
</FormField>
```

## Input 与 PasswordInput 输入框

- Input Props（默认值）
  - `size`: `'small' | 'medium' | 'large'`（`'medium'`）
  - `prefix`, `suffix`: `ReactNode`
  - `error`: `boolean`（`false`）
  - `errorMessage`: `string`
  - `allowClear`: `boolean`（`false`）
  - `className`
  - 其余继承 `input` 原生属性（如 `value`、`onChange`、`disabled`）
- 说明：受控与非受控均可；`allowClear` 在非禁用且有值时显示清空按钮。
- 示例：
```tsx
import { Input, PasswordInput } from '@/components';

<Input placeholder="请输入" allowClear />
<Input prefix={<span>🔍</span>} />
<Input error errorMessage="必填" />
<PasswordInput placeholder="密码" />
```

## Select 下拉选择

- Props（默认值）
  - `value`, `defaultValue`: `string | number`
  - `options`: `{ label: string; value: string|number; disabled?: boolean }[]`
  - `placeholder`: `string`（`'请选择'`）
  - `disabled`: `boolean`（`false`）
  - `onChange`: `(value) => void`
  - `className`, `style`
- 示例：
```tsx
import { Select } from '@/components';

<Select
  options={[
    { label: '启用', value: 1 },
    { label: '禁用', value: 0, disabled: true },
  ]}
  onChange={(v)=>console.log(v)}
/> 
```

## Table 表格

- TableColumn
  - `key`: `string`
  - `title`: `string`
  - `dataIndex?`: `keyof T`
  - `render?`: `(value, record, index) => ReactNode`
  - `width?`: `string | number`
  - `align?`: `'left' | 'center' | 'right'`
  - `fixed?`: `'left' | 'right'`
  - `sorter?`: `boolean`
  - `sortOrder?`: `'ascend' | 'descend' | null`
- Table Props（默认值）
  - `columns`: `TableColumn[]`
  - `dataSource`: `T[]`
  - `rowKey`: `string | (record)=>string`（`'id'`）
  - `loading`: `boolean`（`false`）
  - `emptyText`: `string`（`'暂无数据'`）
  - `onRow?`: `(record, index) => HTMLAttributes<TR>`
  - `scroll?`: `CSSProperties`
  - `className`, `rowClassName`
- 示例：
```tsx
import { Table } from '@/components';

const columns = [
  { key: 'name', title: '姓名', dataIndex: 'name' },
  { key: 'age', title: '年龄', dataIndex: 'age', align: 'right' },
];

const data = [{ id: '1', name: 'Alice', age: 20 }];

<Table columns={columns} dataSource={data} rowKey="id" />
```

## Pagination 分页

- Props（默认值）
  - `current`: `number`
  - `total`: `number`
  - `pageSize`: `number`（`10`）
  - `onChange`: `(page) => void`
  - `showSizeChanger`: `boolean`（`false`）
  - `onSizeChange`: `(size) => void`
  - `pageSizeOptions`: `number[]`（`[10, 20, 50, 100]`）
  - `className`
- 示例：
```tsx
import { Pagination } from '@/components';

<Pagination current={1} total={120} onChange={(p)=>console.log(p)} />
```

## Tag 标签

- Props（默认值）
  - `children`: `ReactNode`
  - `color`: 多主题（如 `success`、`warning`、`error`、及丰富色值）
  - `bordered`: `boolean`（`false`）
  - `closable`: `boolean`（`false`）
  - `onClose`: `() => void`
  - `className`, `style`
- 示例：
```tsx
import { Tag } from '@/components';

<Tag color="success">成功</Tag>
<Tag color="warning" bordered>警告</Tag>
<Tag color="error" closable onClose={()=>{}}>可关闭</Tag>
```

## Rating 评分

- Props（默认值）
  - `value`: `number`
  - `showNumber`: `boolean`
  - `showText`: `boolean`
  - `size`: `'small' | 'medium' | 'large'`
  - `className`
- 相关导出：`SimpleRating`、`getRatingText(value)`、`getRatingColor(value)`
- 示例：
```tsx
import { Rating, SimpleRating } from '@/components';

<Rating value={4.2} showNumber showText />
<SimpleRating value={3.5} />
```

## Icons 图标库

- 使用：`import { CheckIcon, SearchIcon, WechatPayIcon } from '@/components';`
- 映射：`PAYMENT_METHOD_ICONS`、`FEATURE_ICONS` 方便通过 key 取组件。

## RouteCache 路由缓存

- Props
  - `children`: `ReactNode`
  - `maxCache`: `number`
  - `cacheRoutes`: `string[]`
  - `excludeRoutes`: `string[]`
  - `enabled`: `boolean`
- 说明：在 `enabled` 且命中 `cacheRoutes`（或不在 `excludeRoutes`）时缓存组件实例，超过 `maxCache` 会移除最旧项。
- 示例（包裹路由内容）：
```tsx
import { RouteCache } from '@/components';

<RouteCache enabled maxCache={5} cacheRoutes={["/dashboard", "/games"]}>
  {/* 这里渲染当前路由对应的页面组件 */}
</RouteCache>
```

## Layout 布局（Header / Sidebar）

- Layout Props
  - `children`: `ReactNode`
  - `headerProps`: `{ user, onLogout, onToggleSidebar, breadcrumbs }`
  - `sidebarProps`: `{ menuItems, collapsed }`
  - `showSidebar`: `boolean`
- 说明：内部维护侧边栏折叠状态；`Header` 支持主题切换与用户菜单；`Sidebar` 支持二级菜单与激活态匹配。
- 示例：
```tsx
import { Layout } from '@/components';

<Layout
  headerProps={{ user: { username: 'Admin', role: '管理员' }, onLogout: ()=>{} }}
  sidebarProps={{ menuItems: [{ key: 'home', label: '首页', path: '/' }] }}
  showSidebar
>
  {/* 页面内容 */}
</Layout>
```

## Breadcrumb 面包屑

- Props（默认值）
  - `items`: `{ label: string; path?: string }[]`
  - `separator`: `string | ReactNode`
- 示例：
```tsx
import { Breadcrumb } from '@/components';

<Breadcrumb items={[
  { label: '首页', path: '/' },
  { label: '用户' },
]} />
```

## ActionButtons 通用操作按钮组

- Props（默认值）
  - `onView`, `onEdit`, `onDelete`: `() => void`
  - `viewText`: `string`（`'详情'`）
  - `editText`: `string`（`'编辑'`）
  - `deleteText`: `string`（`'删除'`）
  - `className`
- 说明：未传入对应回调则不渲染该按钮。
- 示例：
```tsx
import { ActionButtons } from '@/components';

<ActionButtons onView={()=>{}} onEdit={()=>{}} onDelete={()=>{}} />
```

## BulkActions 批量操作条

- Props（默认值）
  - `selectedCount`: `number`
  - `totalCount`: `number`
  - `actions`: `{ key; label; variant?; danger?; disabled?; onClick }[]`
  - `onClearSelection`: `() => void`
- 示例：
```tsx
import { BulkActions } from '@/components';

<BulkActions
  selectedCount={3}
  totalCount={10}
  actions={[{ key: 'delete', label: '删除', variant: 'outlined', danger: true, onClick: ()=>{} }]}
  onClearSelection={()=>{}}
/> 
```

## Skeleton 骨架屏

- Props（`Skeleton`）
  - `variant`: `'text' | 'rect' | 'circle' | 'card'`
  - `width`, `height`: `number | string`
  - `animated`: `boolean`
  - `className`, `style`
- 相关骨架组件：`TableSkeleton`、`CardSkeleton`、`StatCardSkeleton`、`ListItemSkeleton`、`PageSkeleton`
- 示例：
```tsx
import { Skeleton, TableSkeleton } from '@/components';

<Skeleton variant="text" width={200} animated />
<TableSkeleton rows={3} columns={5} />
```

---

## 注意事项与最佳实践

- 状态优先：在加载与禁用状态下确保交互被正确阻止（如按钮点击）。
- 一致性：遵循统一的变量与色板，与主题切换兼容。
- 受控表单：可预测的 `value/onChange` 优于不受控写法，减少状态分散。
- 组合复用：优先使用 `DataTable` 这类封装组件，减少重复模板代码。

## 变更记录

- 首版创建：整理现有组件并提供基础示例与规范。