# ğŸ¨ å‰ç«¯æµ‹è¯•è¦†ç›–ç‡æ”¹è¿› - ç¬¬ä¸€éƒ¨åˆ† (å¤±è´¥ä¿®å¤ + è¦†ç›–ç‡æ”¶é›†)

**å½“å‰çŠ¶æ€**: 96.9% é€šè¿‡ç‡ (95/98) | è¦†ç›–ç‡æœªæ”¶é›†  
**ç›®æ ‡**: 100% é€šè¿‡ç‡ + è¦†ç›–ç‡å¯ç”¨  
**å·¥æœŸ**: 3-4 å¤©

---

## ğŸ”´ ç¬¬ä¸€éƒ¨åˆ†: å¤±è´¥æµ‹è¯•ä¿®å¤ + è¦†ç›–ç‡æ”¶é›†

### ç›®æ ‡
- ä¿®å¤ 3 ä¸ªå¤±è´¥æµ‹è¯•
- é…ç½®å‰ç«¯è¦†ç›–ç‡æ”¶é›†
- å‰ç«¯æµ‹è¯•é€šè¿‡ç‡: 96.9% â†’ **100%**
- å‰ç«¯è¦†ç›–ç‡: ä¸å¯ç”¨ â†’ **å¯ç”¨**

---

## ğŸ”§ é—®é¢˜ 1: App.test.tsx - `renders app title`

**é—®é¢˜**: AuthProvider ä¸Šä¸‹æ–‡ç¼ºå¤±

**ä¿®å¤æ–¹æ¡ˆ**:
```typescript
// ä¿®å¤å‰
describe('App', () => {
  it('renders app title', () => {
    render(<App />);
    // âŒ å¤±è´¥: AuthProvider ç¼ºå¤±
  });
});

// ä¿®å¤å - æ–¹æ¡ˆ A: åŒ…è£… AuthProvider
describe('App', () => {
  it('renders app title', () => {
    render(
      <AuthProvider>
        <App />
      </AuthProvider>
    );
    // âœ… æˆåŠŸ
  });
});

// ä¿®å¤å - æ–¹æ¡ˆ B: åˆ›å»º Mock AuthProvider
const MockAuthProvider = ({ children }) => (
  <AuthContext.Provider value={{ user: null, login: jest.fn() }}>
    {children}
  </AuthContext.Provider>
);

describe('App', () => {
  it('renders app title', () => {
    render(
      <MockAuthProvider>
        <App />
      </MockAuthProvider>
    );
    // âœ… æˆåŠŸ
  });
});
```

**éªŒè¯**:
```bash
npm run test:run -- App.test.tsx
# æœŸæœ›: âœ… renders app title é€šè¿‡
```

**é¢„è®¡æ—¶é—´**: 30 åˆ†é’Ÿ

---

## ğŸ”§ é—®é¢˜ 2: AuthContext.test.tsx - `should load user from localStorage on mount`

**é—®é¢˜**: localStorage çŠ¶æ€ç®¡ç†é—®é¢˜

**ä¿®å¤æ–¹æ¡ˆ**:
```typescript
describe('AuthContext', () => {
  beforeEach(() => {
    localStorage.clear();
  });

  it('should load user from localStorage on mount', async () => {
    const mockUser = { id: 1, name: 'test' };
    
    // 1. è®¾ç½® localStorage
    localStorage.setItem('user', JSON.stringify(mockUser));
    
    // 2. æ¸²æŸ“ç»„ä»¶
    const { getByText } = render(
      <AuthProvider>
        <TestComponent />
      </AuthProvider>
    );
    
    // 3. ç­‰å¾…å¼‚æ­¥æ“ä½œå®Œæˆ
    await waitFor(() => {
      expect(getByText(mockUser.name)).toBeInTheDocument();
    });
  });
});
```

**å…³é”®æ£€æŸ¥**:
```typescript
// 1. æ£€æŸ¥ useEffect ä¾èµ–é¡¹
useEffect(() => {
  const user = localStorage.getItem('user');
  if (user) {
    setUser(JSON.parse(user));
  }
}, []); // âœ… ä¾èµ–é¡¹æ­£ç¡®

// 2. ä½¿ç”¨ waitFor ç­‰å¾…å¼‚æ­¥çŠ¶æ€æ›´æ–°
await waitFor(() => {
  expect(state).toBe(expectedValue);
});
```

**éªŒè¯**:
```bash
npm run test:run -- AuthContext.test.tsx
# æœŸæœ›: âœ… should load user from localStorage on mount é€šè¿‡
```

**é¢„è®¡æ—¶é—´**: 45 åˆ†é’Ÿ

---

## ğŸ”§ é—®é¢˜ 3: utils/crypto.test.ts - `should decrypt only specified fields`

**é—®é¢˜**: æ•°æ®ç±»å‹è½¬æ¢é—®é¢˜

**ä¿®å¤æ–¹æ¡ˆ**:
```typescript
describe('crypto', () => {
  it('should decrypt only specified fields', () => {
    const data = {
      name: 'test',
      password: '123456',
      email: 'test@example.com'
    };
    
    // 1. ç¡®ä¿æ•°æ®ç±»å‹æ­£ç¡®
    const encrypted = encrypt(JSON.stringify(data));
    
    // 2. æŒ‡å®šè¦è§£å¯†çš„å­—æ®µ
    const fieldsToDecrypt = ['password'];
    
    // 3. è§£å¯†å¹¶éªŒè¯
    const decrypted = decrypt(encrypted, fieldsToDecrypt);
    const result = JSON.parse(decrypted);
    
    // 4. éªŒè¯ç»“æœ
    expect(result.password).toBeDefined();
    expect(result.password).toBe('123456');
    expect(result.name).toBe('test');
  });
});
```

**éªŒè¯**:
```bash
npm run test:run -- crypto.test.ts
# æœŸæœ›: âœ… should decrypt only specified fields é€šè¿‡
```

**é¢„è®¡æ—¶é—´**: 30 åˆ†é’Ÿ

---

## ğŸ“Š é…ç½®å‰ç«¯è¦†ç›–ç‡æ”¶é›†

### æ­¥éª¤ 1: æ£€æŸ¥ Vitest é…ç½®

```typescript
// vitest.config.ts
import { defineConfig } from 'vitest/config';
import react from '@vitejs/plugin-react';

export default defineConfig({
  plugins: [react()],
  test: {
    globals: true,
    environment: 'jsdom',
    setupFiles: ['./src/test/setup.ts'],
    // âœ… å¯ç”¨è¦†ç›–ç‡æ”¶é›†
    coverage: {
      provider: 'v8',
      reporter: ['text', 'json', 'html', 'lcov'],
      exclude: [
        'node_modules/',
        'src/test/',
        '**/*.test.ts',
        '**/*.test.tsx',
      ],
    },
  },
});
```

### æ­¥éª¤ 2: éªŒè¯ package.json è„šæœ¬

```json
{
  "scripts": {
    "test": "vitest",
    "test:run": "vitest run",
    "test:coverage": "vitest run --coverage"
  }
}
```

### æ­¥éª¤ 3: è¿è¡Œè¦†ç›–ç‡æ”¶é›†

```bash
npm run test:coverage
# è¾“å‡º:
# âœ… ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
# âœ… ç”Ÿæˆ HTML æŠ¥å‘Š (coverage/index.html)
# âœ… ç”Ÿæˆ LCOV æŠ¥å‘Š (coverage/lcov.info)
```

### æ­¥éª¤ 4: éªŒè¯è¦†ç›–ç‡æŠ¥å‘Š

```bash
# æŸ¥çœ‹è¦†ç›–ç‡æ‘˜è¦
npm run test:coverage

# æœŸæœ›è¾“å‡º:
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# File                      | % Stmts | % Branch | % Funcs | % Lines
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# All files                 |   XX.X  |   XX.X   |  XX.X   |  XX.X
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

**é¢„è®¡æ—¶é—´**: 1 å°æ—¶

---

## âœ… ç¬¬ä¸€éƒ¨åˆ†éªŒè¯æ¸…å•

```bash
# 1. è¿è¡Œæ‰€æœ‰å‰ç«¯æµ‹è¯•
npm run test:run

# æœŸæœ›è¾“å‡º:
# âœ… App.test.tsx - renders app title
# âœ… AuthContext.test.tsx - should load user from localStorage on mount
# âœ… utils/crypto.test.ts - should decrypt only specified fields
# âœ… 98/98 æµ‹è¯•é€šè¿‡

# 2. ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage

# æœŸæœ›è¾“å‡º:
# âœ… è¦†ç›–ç‡æŠ¥å‘Šç”ŸæˆæˆåŠŸ
# âœ… HTML æŠ¥å‘Šå¯ç”¨
# âœ… è¦†ç›–ç‡æ•°æ®å¯ç”¨

# 3. éªŒè¯è¦†ç›–ç‡æ•°æ®
cat coverage/coverage-final.json | jq '.total'

# æœŸæœ›: æ˜¾ç¤ºè¦†ç›–ç‡ç»Ÿè®¡
```

---

## ğŸ¯ æˆåŠŸæ ‡å‡†

- âœ… å‰ç«¯æµ‹è¯•é€šè¿‡ç‡ = 100% (98/98)
- âœ… 3 ä¸ªå¤±è´¥æµ‹è¯•å…¨éƒ¨ä¿®å¤
- âœ… è¦†ç›–ç‡æ”¶é›†é…ç½®å®Œæˆ
- âœ… è¦†ç›–ç‡æŠ¥å‘Šå¯ç”¨
- âœ… æ— æ–°å¢å¤±è´¥

---

## ğŸ“‹ å·¥ä½œæ¸…å•

- [ ] ä¿®å¤ App.test.tsx (30åˆ†é’Ÿ)
- [ ] ä¿®å¤ AuthContext.test.tsx (45åˆ†é’Ÿ)
- [ ] ä¿®å¤ crypto.test.ts (30åˆ†é’Ÿ)
- [ ] é…ç½®è¦†ç›–ç‡æ”¶é›† (1å°æ—¶)
- [ ] éªŒè¯æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] éªŒè¯è¦†ç›–ç‡æŠ¥å‘Šå¯ç”¨

**æ€»å·¥æ—¶**: 2-3 å°æ—¶  
**äººå‘˜**: 1 äºº  
**å·¥æœŸ**: 3-4 å¤©

---

**ä¸‹ä¸€æ­¥**: å®Œæˆç¬¬ä¸€éƒ¨åˆ†åï¼Œè¿›è¡Œç¬¬äºŒéƒ¨åˆ†è¦†ç›–ç‡æå‡å·¥ä½œã€‚
