# ğŸ¨ å‰ç«¯æµ‹è¯•è¦†ç›–ç‡æ”¹è¿› - ç¬¬äºŒéƒ¨åˆ† (è¦†ç›–ç‡æå‡)

**å½“å‰çŠ¶æ€**: 100% é€šè¿‡ç‡ | è¦†ç›–ç‡å¯ç”¨  
**ç›®æ ‡**: è¦†ç›–ç‡ 80%+  
**å·¥æœŸ**: 1-2 å‘¨

---

## ğŸŸ¢ ç¬¬äºŒéƒ¨åˆ†: è¦†ç›–ç‡æå‡ (1-2å‘¨)

### ç›®æ ‡
- å‰ç«¯è¦†ç›–ç‡: ä¸å¯ç”¨ â†’ **80%+**
- é¡µé¢ç»„ä»¶è¦†ç›–ç‡: 0% â†’ **80%+**
- API é›†æˆæµ‹è¯•: 0% â†’ **85%+**
- ä¸šåŠ¡é€»è¾‘æµ‹è¯•: 0% â†’ **80%+**

---

## ğŸ“„ 1ï¸âƒ£ é¡µé¢ç»„ä»¶æµ‹è¯• (3-4å¤©)

### éœ€è¦æ·»åŠ çš„é¡µé¢æµ‹è¯•

| é¡µé¢ | æ–‡ä»¶ | å½“å‰ | ç›®æ ‡ | å·¥ä½œé‡ | å…³é”®æµ‹è¯• |
|------|------|------|------|--------|---------|
| Dashboard | `Dashboard.test.tsx` | 0% | 80% | 2h | æ•°æ®åŠ è½½ã€å›¾è¡¨ã€ç­›é€‰ |
| ç”¨æˆ·ç®¡ç† | `UserManagement.test.tsx` | 0% | 80% | 2h | åˆ—è¡¨ã€æ–°å¢ã€ç¼–è¾‘ã€åˆ é™¤ |
| è®¢å•ç®¡ç† | `OrderManagement.test.tsx` | 0% | 80% | 2h | åˆ—è¡¨ã€æœç´¢ã€çŠ¶æ€æ›´æ–° |
| æ”¯ä»˜ç®¡ç† | `PaymentManagement.test.tsx` | 0% | 80% | 2h | åˆ—è¡¨ã€å®¡æ ¸ã€é€€æ¬¾ |
| ç©å®¶ç®¡ç† | `PlayerManagement.test.tsx` | 0% | 80% | 2h | åˆ—è¡¨ã€æŸ¥è¯¢ã€æ“ä½œ |

### æµ‹è¯•æ¨¡æ¿

```typescript
// pages/Dashboard/Dashboard.test.tsx
import { render, screen, waitFor } from '@testing-library/react';
import userEvent from '@testing-library/user-event';
import Dashboard from './Dashboard';
import * as api from '@/api/dashboard';

jest.mock('@/api/dashboard');

describe('Dashboard', () => {
  beforeEach(() => {
    jest.clearAllMocks();
  });

  // 1. æ•°æ®åŠ è½½æµ‹è¯•
  it('should load dashboard data on mount', async () => {
    const mockData = {
      totalUsers: 100,
      totalOrders: 50,
      revenue: 10000,
    };
    
    (api.getDashboardData as jest.Mock).mockResolvedValue(mockData);
    
    render(<Dashboard />);
    
    await waitFor(() => {
      expect(screen.getByText('100')).toBeInTheDocument();
      expect(screen.getByText('50')).toBeInTheDocument();
    });
  });

  // 2. åŠ è½½çŠ¶æ€æµ‹è¯•
  it('should show loading state while fetching', () => {
    (api.getDashboardData as jest.Mock).mockImplementation(
      () => new Promise(() => {})
    );
    
    render(<Dashboard />);
    expect(screen.getByText(/loading/i)).toBeInTheDocument();
  });

  // 3. é”™è¯¯å¤„ç†æµ‹è¯•
  it('should show error message on API failure', async () => {
    (api.getDashboardData as jest.Mock).mockRejectedValue(
      new Error('API Error')
    );
    
    render(<Dashboard />);
    
    await waitFor(() => {
      expect(screen.getByText(/error/i)).toBeInTheDocument();
    });
  });

  // 4. äº¤äº’æµ‹è¯•
  it('should update data when filter changes', async () => {
    const user = userEvent.setup();
    const mockData = { totalUsers: 100 };
    
    (api.getDashboardData as jest.Mock).mockResolvedValue(mockData);
    
    render(<Dashboard />);
    
    const filterButton = screen.getByRole('button', { name: /filter/i });
    await user.click(filterButton);
    
    await waitFor(() => {
      expect(api.getDashboardData).toHaveBeenCalled();
    });
  });
});
```

---

## ğŸ”Œ 2ï¸âƒ£ API é›†æˆæµ‹è¯• (2-3å¤©)

### éœ€è¦æ·»åŠ çš„ API æµ‹è¯•

| API æ¨¡å— | æ–‡ä»¶ | å½“å‰ | ç›®æ ‡ | å·¥ä½œé‡ | å…³é”®æµ‹è¯• |
|---------|------|------|------|--------|---------|
| ç”¨æˆ· API | `api/user.test.ts` | 0% | 85% | 2h | è·å–ã€åˆ›å»ºã€æ›´æ–°ã€åˆ é™¤ |
| è®¢å• API | `api/order.test.ts` | 0% | 85% | 2h | åˆ—è¡¨ã€åˆ›å»ºã€æ›´æ–°çŠ¶æ€ |
| æ”¯ä»˜ API | `api/payment.test.ts` | 0% | 85% | 2h | æ”¯ä»˜ã€éªŒè¯ã€é€€æ¬¾ |
| ç©å®¶ API | `api/player.test.ts` | 0% | 85% | 2h | æŸ¥è¯¢ã€æ›´æ–°ã€ç»Ÿè®¡ |

### æµ‹è¯•æ¨¡æ¿

```typescript
// api/user.test.ts
import axios from 'axios';
import * as userApi from './user';

jest.mock('axios');

describe('User API', () => {
  beforeEach(() => {
    jest.clearAllMocks();
  });

  // 1. è·å–ç”¨æˆ·åˆ—è¡¨
  describe('getUsers', () => {
    it('should fetch users successfully', async () => {
      const mockUsers = [
        { id: 1, name: 'User 1' },
        { id: 2, name: 'User 2' },
      ];
      
      (axios.get as jest.Mock).mockResolvedValue({
        data: { data: mockUsers },
      });
      
      const result = await userApi.getUsers();
      
      expect(result).toEqual(mockUsers);
      expect(axios.get).toHaveBeenCalledWith('/api/users');
    });

    it('should handle API error', async () => {
      (axios.get as jest.Mock).mockRejectedValue(
        new Error('Network error')
      );
      
      await expect(userApi.getUsers()).rejects.toThrow('Network error');
    });

    it('should support pagination', async () => {
      (axios.get as jest.Mock).mockResolvedValue({
        data: { data: [] },
      });
      
      await userApi.getUsers({ page: 2, pageSize: 20 });
      
      expect(axios.get).toHaveBeenCalledWith(
        '/api/users',
        expect.objectContaining({
          params: { page: 2, pageSize: 20 },
        })
      );
    });
  });

  // 2. åˆ›å»ºç”¨æˆ·
  describe('createUser', () => {
    it('should create user successfully', async () => {
      const newUser = { name: 'New User', email: 'new@example.com' };
      const mockResponse = { id: 3, ...newUser };
      
      (axios.post as jest.Mock).mockResolvedValue({
        data: { data: mockResponse },
      });
      
      const result = await userApi.createUser(newUser);
      
      expect(result).toEqual(mockResponse);
      expect(axios.post).toHaveBeenCalledWith('/api/users', newUser);
    });
  });

  // 3. æ›´æ–°ç”¨æˆ·
  describe('updateUser', () => {
    it('should update user successfully', async () => {
      const userId = 1;
      const updates = { name: 'Updated Name' };
      
      (axios.put as jest.Mock).mockResolvedValue({
        data: { data: { id: userId, ...updates } },
      });
      
      const result = await userApi.updateUser(userId, updates);
      
      expect(axios.put).toHaveBeenCalledWith(`/api/users/${userId}`, updates);
    });
  });

  // 4. åˆ é™¤ç”¨æˆ·
  describe('deleteUser', () => {
    it('should delete user successfully', async () => {
      const userId = 1;
      
      (axios.delete as jest.Mock).mockResolvedValue({ data: {} });
      
      await userApi.deleteUser(userId);
      
      expect(axios.delete).toHaveBeenCalledWith(`/api/users/${userId}`);
    });
  });
});
```

---

## ğŸ¯ 3ï¸âƒ£ ä¸šåŠ¡é€»è¾‘æµ‹è¯• (2-3å¤©)

### éœ€è¦å¢å¼ºçš„ä¸šåŠ¡é€»è¾‘

| é€»è¾‘ | æ–‡ä»¶ | å½“å‰ | ç›®æ ‡ | å·¥ä½œé‡ | å…³é”®æµ‹è¯• |
|------|------|------|------|--------|---------|
| è®¤è¯ Hook | `hooks/useAuth.test.ts` | 0% | 80% | 1.5h | ç™»å½•ã€ç™»å‡ºã€æƒé™æ£€æŸ¥ |
| è¡¨å•éªŒè¯ | `hooks/useForm.test.ts` | 0% | 80% | 1.5h | éªŒè¯ã€æäº¤ã€é”™è¯¯å¤„ç† |
| çŠ¶æ€ç®¡ç† | `hooks/useStore.test.ts` | 0% | 80% | 1.5h | çŠ¶æ€æ›´æ–°ã€è®¢é˜…ã€é‡ç½® |
| æƒé™æ£€æŸ¥ | `utils/permission.test.ts` | 0% | 80% | 1.5h | æƒé™éªŒè¯ã€è§’è‰²æ£€æŸ¥ |

### æµ‹è¯•æ¨¡æ¿

```typescript
// hooks/useAuth.test.ts
import { renderHook, act, waitFor } from '@testing-library/react';
import useAuth from './useAuth';
import * as authApi from '@/api/auth';

jest.mock('@/api/auth');

describe('useAuth', () => {
  beforeEach(() => {
    jest.clearAllMocks();
    localStorage.clear();
  });

  // 1. ç™»å½•æµ‹è¯•
  it('should login successfully', async () => {
    const mockUser = { id: 1, name: 'Test User' };
    (authApi.login as jest.Mock).mockResolvedValue(mockUser);
    
    const { result } = renderHook(() => useAuth());
    
    await act(async () => {
      await result.current.login('user@example.com', 'password');
    });
    
    await waitFor(() => {
      expect(result.current.user).toEqual(mockUser);
      expect(result.current.isAuthenticated).toBe(true);
    });
  });

  // 2. ç™»å‡ºæµ‹è¯•
  it('should logout successfully', async () => {
    const mockUser = { id: 1, name: 'Test User' };
    localStorage.setItem('user', JSON.stringify(mockUser));
    
    const { result } = renderHook(() => useAuth());
    
    await act(async () => {
      await result.current.logout();
    });
    
    await waitFor(() => {
      expect(result.current.user).toBeNull();
      expect(result.current.isAuthenticated).toBe(false);
    });
  });

  // 3. æƒé™æ£€æŸ¥æµ‹è¯•
  it('should check user permissions', () => {
    const mockUser = {
      id: 1,
      roles: ['admin', 'user'],
    };
    localStorage.setItem('user', JSON.stringify(mockUser));
    
    const { result } = renderHook(() => useAuth());
    
    expect(result.current.hasRole('admin')).toBe(true);
    expect(result.current.hasRole('superadmin')).toBe(false);
  });

  // 4. é”™è¯¯å¤„ç†æµ‹è¯•
  it('should handle login error', async () => {
    (authApi.login as jest.Mock).mockRejectedValue(
      new Error('Invalid credentials')
    );
    
    const { result } = renderHook(() => useAuth());
    
    await act(async () => {
      try {
        await result.current.login('user@example.com', 'wrong');
      } catch (error) {
        expect(error.message).toBe('Invalid credentials');
      }
    });
  });
});
```

---

## âœ… ç¬¬äºŒéƒ¨åˆ†éªŒè¯æ¸…å•

```bash
# 1. è¿è¡Œæ‰€æœ‰å‰ç«¯æµ‹è¯•
npm run test:run

# æœŸæœ›: æ‰€æœ‰æµ‹è¯•é€šè¿‡

# 2. ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage

# æœŸæœ›è¾“å‡º:
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# File                      | % Stmts | % Branch | % Funcs | % Lines
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# All files                 |   80.0  |   75.0   |  80.0   |  80.0
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# 3. æŸ¥çœ‹è¯¦ç»†è¦†ç›–ç‡
open coverage/index.html

# 4. æ£€æŸ¥ç‰¹å®šæ–‡ä»¶è¦†ç›–ç‡
npm run test:coverage -- --reporter=text | grep "pages/"
npm run test:coverage -- --reporter=text | grep "api/"
npm run test:coverage -- --reporter=text | grep "hooks/"
```

---

## ğŸ¯ æˆåŠŸæ ‡å‡†

- âœ… é¡µé¢ç»„ä»¶è¦†ç›–ç‡ â‰¥80% (5 ä¸ªé¡µé¢)
- âœ… API é›†æˆæµ‹è¯•è¦†ç›–ç‡ â‰¥85% (4 ä¸ªæ¨¡å—)
- âœ… ä¸šåŠ¡é€»è¾‘æµ‹è¯•è¦†ç›–ç‡ â‰¥80% (4 ä¸ª Hook/å·¥å…·)
- âœ… å‰ç«¯æ•´ä½“è¦†ç›–ç‡ â‰¥80%
- âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡ (100+)
- âœ… æ— æ–°å¢å¤±è´¥

---

## ğŸ“‹ å·¥ä½œæ¸…å•

### é¡µé¢ç»„ä»¶æµ‹è¯•
- [ ] Dashboard.test.tsx (2h)
- [ ] UserManagement.test.tsx (2h)
- [ ] OrderManagement.test.tsx (2h)
- [ ] PaymentManagement.test.tsx (2h)
- [ ] PlayerManagement.test.tsx (2h)

### API é›†æˆæµ‹è¯•
- [ ] api/user.test.ts (2h)
- [ ] api/order.test.ts (2h)
- [ ] api/payment.test.ts (2h)
- [ ] api/player.test.ts (2h)

### ä¸šåŠ¡é€»è¾‘æµ‹è¯•
- [ ] hooks/useAuth.test.ts (1.5h)
- [ ] hooks/useForm.test.ts (1.5h)
- [ ] hooks/useStore.test.ts (1.5h)
- [ ] utils/permission.test.ts (1.5h)

### éªŒè¯
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] è¦†ç›–ç‡ â‰¥80%
- [ ] ç”Ÿæˆæœ€ç»ˆæŠ¥å‘Š

**æ€»å·¥æ—¶**: 18-22 å°æ—¶  
**äººå‘˜**: 2 äºº  
**å·¥æœŸ**: 8-10 å¤©

---

**å®Œæˆå**: å‰ç«¯æµ‹è¯•è¦†ç›–ç‡è¾¾åˆ° 80%+ï¼Œä¸åç«¯æµ‹è¯•ä¸€èµ·å®Œæˆæ•´ä½“è¦†ç›–ç‡æå‡ç›®æ ‡ã€‚
